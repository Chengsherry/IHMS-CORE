@model IHMS.ViewModel.PPlanViewModel

@{
    ViewData["Title"] = "Detail";
}

<div class="container ">
    <h1>細項</h1>

    <hr>

    <ul id="navtabs" class="nav nav-tabs">
        <li class="nav-item">
            <button onclick="navChange(value)" value="1" class="nav-link active btnchange" aria-current="page">計畫細項</button>
        </li>
        <li class="nav-item">
            @*            <a asp-action="Detail" class="nav-link active" aria-current="page">計畫細項</a>*@
            <button onclick="navChange(value)" value="2" class="nav-link btnchange">飲食清單</button>
        </li>
        <li class="nav-item">
            <button onclick="navChange(value)" value="3" class="nav-link btnchange">運動清單</button>
        </li>
    </ul>
    <br>

    <div class="row d-md-flex flex-column align-items-md-center">
        <div id="listContent" class="col-md-12">
            <form asp-action="Detail">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <div class="form-group">
                    <label asp-for="MemberName" class="control-label"></label>
                    <input asp-for="MemberName" class="form-control" />
                    <span asp-validation-for="MemberName" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Pname" class="control-label"></label>
                    <input asp-for="Pname" class="form-control" />
                    <span asp-validation-for="Pname" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Weight" class="control-label"></label>
                    <input asp-for="Weight" class="form-control" />
                    <span asp-validation-for="Weight" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="BodyPercentage" class="control-label"></label>
                    <input asp-for="BodyPercentage" class="form-control" />
                    <span asp-validation-for="BodyPercentage" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="RegisterDate" class="control-label"></label>
                    <input asp-for="RegisterDate" class="form-control" />
                    <span asp-validation-for="RegisterDate" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="EndDate" class="control-label"></label>
                    <input asp-for="EndDate" class="form-control" />
                    <span asp-validation-for="EndDate" class="text-danger"></span>
                </div>
            </form>

            <a asp-action="List" class="btn btn-primary mt-3">回到計畫列表</a>
        </div>
        <div id="dietContent" class="col-md-12 d-none">
            <table class="table">

                <thead>
                    <tr>
                        <th>
                            飲食日期
                        </th>
                        <th></th>                      
                    </tr>
                </thead>
                <tbody>
                    @{
                        for(int i=0;i<Model.DietId.Count;i++)
                        {

                            <tr>
                                <td>
                                    @Model.DietDate[i].ToString()
                                </td>
                                <td>
                                    @Html.ActionLink("Detail", "Detail", new { id=Model.DietId[i],type="diet"}, new{@class="btn btn-success"})
                                </td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
            <a asp-action="List" class="btn btn-primary mt-3">回到計畫列表</a>
        </div>

        <div id="sportContent" class="col-md-12 d-none">
            <table class="table">
                <thead>
                    <tr>
                        <th>
                            日期
                        </th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    @{
                        for (int i = 0; i < Model.SportId.Count; i++)
                        {
                            <tr>
                                <td>
                                    @Model.SportDate[i].ToString()
                                </td>
                                <td>
                                    @Html.ActionLink("Detail", "Detail", new { id=Model.SportId[i],type="sport" }, new{@class="btn btn-success"}) 
                                </td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
            <a asp-action="List" class="btn btn-primary mt-3">回到計畫列表</a>
        </div>

    </div>



    @section Scripts {
        @{
            await Html.RenderPartialAsync("_ValidationScriptsPartial");
            <script>
                function navChange(e) {
                    let list = document.querySelector('#listContent')
                    let diet = document.querySelector('#dietContent')
                    let sport = document.querySelector('#sportContent')

                    //切換標籤
                    let btnChangeSet = document.querySelectorAll('.btnchange')
                    for (let i = 0; i < btnChangeSet.length; i++) {
                        btnChangeSet[i].classList.remove('active')
                        if (btnChangeSet[i].value == e) {
                            btnChangeSet[i].classList.add('active')
                        }
                    }

                    list.classList.add('d-none')                  
                    diet.classList.add('d-none')                 
                    sport.classList.add('d-none')                   
                                    switch (parseInt(e)) {
                        case 1:
                          
                            list.classList.remove('d-none')
                            break
                        case 2:
                           
                            diet.classList.remove('d-none')
                            break
                        default:
                            
                            sport.classList.remove('d-none')
                            break
                    }

                }
            </script>
        }
    }
